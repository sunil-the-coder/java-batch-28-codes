// Flat cost calculator

package com.devgen.ff.model;

public class Flat {
  private String name;
  private int rent;
  private int distance;
  private int travelTime;
  private int locationAdvantage;
  private int totalCost;

  public Flat(String name, int rent, int distance, int travelTime, int locationAdvantage) {
    this.name = name;
    this.rent = rent;
    this.distance = distance;
    this.travelTime = travelTime;
    this.locationAdvantage = locationAdvantage;
  }

  public String getName() {
    return name;
  }

  public int getRent() {
    return rent;
  }

  public int getDistance() {
    return distance;
  }

  public int getTravelTime() {
    return travelTime;
  }

  public int getLocationAdvantage() {
    return locationAdvantage;
  }

  public void setTotalCost(int totalCost) {
    this.totalCost = totalCost;
  }

  public int getTotalCost() {
    return totalCost;
  }
}


-------------------


package com.devgen.ff.service;

import com.devgen.ff.model.Flat;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class FlatCostCalculatorService {

  private Map<String, Flat> flats;

  public FlatCostCalculatorService() {
    flats = new HashMap<>();
  }

  public void addFlat(Flat flat) {
    flats.put(flat.getName(), flat);

  }

  public Flat getBestFlat(Map<String, Integer> costParams) {
    //logic to get best flat based on some criteria

    //1. calculate the total cost of each flat
    List<Flat> flatList = new ArrayList<>(flats.values());

    flatList.forEach(flat -> {
      int totalCost = flat.getRent()
          + getDistanceCost(costParams, flat)
          + getTravelCost(costParams, flat)
          - flat.getLocationAdvantage();
      IO.println("Flat: " + flat.getName() + " Total Cost: " + totalCost);
      flat.setTotalCost(totalCost);
    });

    //3. find the flat with minimum total cost
    Collections.sort(flatList, new SortFlatByTotalCost());
    return flatList.get(0);
  }

  private int getTravelCost(Map<String, Integer> costParams, Flat flat) {
    return flat.getTravelTime() * costParams.get("travelCostPerMin") * costParams.get(
        "totalWorkingDays");
  }

  private int getDistanceCost(Map<String, Integer> costParams, Flat flat) {
    return flat.getDistance() * costParams.get("distanceCostPerKm") * costParams.get(
        "totalWorkingDays");
  }

}

class SortFlatByTotalCost implements Comparator<Flat> {
  @Override
  public int compare(Flat f1, Flat f2) {
    if(f1.getTotalCost() > f2.getTotalCost()) {
      return 1;
    } else if(f1.getTotalCost() < f2.getTotalCost()) {
      return -1;
    }
    return 0;
  }
}


/*
  arr = [10,20,5] --> smallest number
  int smallest = arr[0];
  for(int i = 0; i < arr.length; i++) {
  if(arr[i] < smallest) {
    smallest = arr[i];
  }

 */


------------------------

package com.devgen;

import com.devgen.ff.model.Flat;
import com.devgen.ff.service.FlatCostCalculatorService;
import java.util.HashMap;
import java.util.Map;

public class Main {

  static void main() {
    //TIP Press <shortcut actionId="ShowIntentionActions"/> with your caret at the highlighted text
    // to see how IntelliJ IDEA suggests fixing it.
    FlatCostCalculatorService service = new FlatCostCalculatorService();

    //1. add few flats
    service.addFlat(new Flat("A", 10000, 2, 15, 500 ));
    service.addFlat(new Flat("B", 12000, 1, 15, 100 ));
    service.addFlat(new Flat("C", 11000, 4, 20, 1500 ));

    Map<String, Integer> costParams = new HashMap<>();
    costParams.put("totalWorkingDays", 20);
    costParams.put("travelCostPerMin", 15);
    costParams.put("distanceCostPerKm", 50);
    costParams.put("budget", 13000);

    //2. get best flat for given budget
    Flat bestFlat = service.getBestFlat(costParams);
    System.out.println("Best flat is: " + bestFlat.getName() +" with total cost: " + bestFlat.getTotalCost());


    int a = 10;
    a = a + 20; // a += 20; // shorthand operator

//    int[] arr = {10, 20 ,5, 100, 7, 1, 0, 50, 55}; // sort this in ascending order
//    //[0, 1, 5, 7, 10, 20, 50, 55, 100]
//    // get first element as smallest
//    int smallest = arr[0];
//    for(int i = 0; i < arr.length; i++) {
//      if (arr[i] < smallest) {
//        smallest = arr[i];
//      }
//    }
//    IO.println("Smallest number is: " + smallest);

  }
}
